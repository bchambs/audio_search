<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!--Google analytics-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51583732-1', 'audiosearch.net');
      ga('send', 'pageview');

    </script><!--END analytics-->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
   
    <link href="{{ STATIC_URL }}css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}css/grid.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}css/artist.css" rel="stylesheet">

    <title>audiosearch</title>
</head>
<body>

<div class="container">
    <div class="nav row">
        <span id="nav-home-icon" class="glyphicon glyphicon-music col-lg-1"></span>

        <div id="nav-title" class="col-lg-3">
            <a href = "{% url 'src.views.index' %}" >audiosearch</a>
            ::
        </div>

        <div id="nav-search"  class="col-lg-3">
            <form action="/search/" method="GET">
                <input class="search-bar" type="text" name="q">
            </form>
        </div>

        <div id="nav-about" class="col-lg-2">
            about
        </div>
        <div id="nav-contact" class="col-lg-2">
            contact
        </div>
    </div>

    <div class="banner-container">
    <div class="wrap">
        <div class="separator"></div>

        <div id="image-banner">
            <!--spinner display-->
            {% if status == 'pending' %}
                <img id="spinner" src="{{ STATIC_URL }}img/ajax-loader.gif" />
            {% elif status == 'failed' %}
                {{ message }}
            {% endif %}
            <!--END spinner-->

            <!--tiled images-->
            {% for tile in profile.tiles %}
            <!--HIT: load tiles -->
            <div class="tile-wrapper">
                <img id={{ tile.0 }} class="tile-image" src={{ tile.1 }} />
            </div>
            {% endfor %}
            <!--END tiles-->

            <!--container:: h=300, w=1186-->
            <!--image:: h=300, w=296.5-->
        </div><!--END image banner-->

        <div id="banner-title">
            <div id="name">
                {{ profile.name }}
            </div>
        </div><!--END banner title-->

        <div class="separator"></div>
    </div>
    </div>

    <div class="artist-brief-info">
    <div class="wrap">
        <!--rating, rank, bio-->
        <div class="row">
            <div class="rating-box col-lg-2">
                <span class="glyphicon glyphicon-fire"></span>
                <span id="hotttnesss" class="artist-hint" title="A representation of how popular an artist is.">
                    {{ profile.hotttnesss }}
                </span>
                
                <br />
                Rank: 
                <span id="hotttnesss_rank" class="rank">
                    {{ profile.hotttnesss_rank }}
                </span>
            </div>

            <div id="bios" class="bio-box col-lg-10">
                <span id="bio_trunc">
                    {{ profile.bio_trunc }}
                </span>
                <!-- TODO: add toggle for full bio modal -->
                <!-- <span id="bio-toggle" title="Expand this biography.">
                    more
                </span> -->
            </div>
        </div>
        <!--END rating, rank, bio-->

        <!-- <div class="separator"></div> -->
    </div>
    </div>

    <div class="recommended-content">
    <div class="wrap">
        <!-- <div class="separator"></div> -->
        <!--similar artists and songs-->
        <div class="row">
            <div class="similar-content col-lg-7">
                <table id="similar-table" class="table">
                {% if similar %}
                    <tbody>
                        {% for artist in similar %}
                            {% if forloop.counter|divisibleby:2 %}
                            <tr class="row-even">
                            {% else %}
                            <tr class="row-odd">
                            {% endif %}
                                <td class="preview-image-width">
                                    <div class="preview-container">
                                        <img class="preview-image" src="{{ artist.preview_url }}" />
                                        <div class="preview-text">
                                            <span class="preview-terms">{{ artist.terms }}</span>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <table class="preview-songs-table">
                                        <tbody>
                                            {% if forloop.counter|divisibleby:2 %}
                                            <tr class="row-even">
                                            {% else %}
                                            <tr class="row-odd">
                                            {% endif %}
                                                <th class="preview-name-title">{{ artist.name }}</th>
                                                <!-- <th class="preview-name-title">test</th> -->
                                                <tr><td>{{ artist.songs.0.title }}</td></tr>
                                                <tr><td>{{ artist.songs.1.title }}</td></tr>
                                                <tr><td>{{ artist.songs.2.title }}</td></tr>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                {% endif %}
                </table>
            </div><!--END similar-->

            <!--songs-->
            <div class="song-content col-lg-4">
                <table id="song-table" class="table">
                    {% if songs %}
                    <tbody>
                        {% for song in songs %}
                            {% if forloop.counter|divisibleby:2 %}
                            <tr class="row-even">
                            {% else %}
                            <tr class="row-odd">
                            {% endif %}
                                <td>{{ forloop.counter }}</td>
                                <td>{{ song.title }}</td>
                                <!-- <td>{{ song.id }}</td> -->
                            </tr>
                        {% endfor %}
                    </tbody>
                    {% endif %}
                </table>
            </div><!--END songs-->
        </div><!--END similar and songs-->
    </div>
    </div>

    <!-- <div class="separator"></div>

    <div class="footer wrap">
        
    </div> --><!--END footer-->

    <!-- <div class="reflection main"></div> -->
</div><!--END container-->

<script src="{{ STATIC_URL }}js/jquery-1.11.0.js"></script>
<script src="{{ STATIC_URL }}js/bootstrap.min.js"></script>
<script src="{{ STATIC_URL }}js/ajax-loader.js"></script>
<script src="{{ STATIC_URL }}js/artist-utils.js"></script>

{% if not profile %}
    <script type="text/javascript">
        dispatch("{{ q|escapejs }}", 'profile', false, 0);
    </script>
{% endif %}

{% if not songs %}
    <script type="text/javascript">
        dispatch("{{ q|escapejs }}", 'songs', true, 0);
    </script>
{% endif %}

{% if not similar %}
    <script type="text/javascript">
        dispatch("{{ q|escapejs }}", 'similar', true, 0);
    </script>
{% endif %}

</body>
</html>
